var GFGenericMap=function(e){var n=this;return n.options=e,n.UI=jQuery("#gaddon-setting-row-"+n.options.fieldName),n.init=function(){n.bindEvents(),n.setupData(),n.setupRepeater()},n.bindEvents=function(){n.UI.on("change",'select[name="_gaddon_setting_'+n.options.keyFieldName+'"]',(function(){var e=jQuery(this),n=e.data("chosen")?e.siblings(".chosen-container"):e.data("select2")?e.siblings(".select2-container"):e,t=e.siblings(".custom-key-container");"gf_custom"==e.val()&&n.fadeOut((function(){t.fadeIn().focus()}))})),n.UI.on("change",'select[name="_gaddon_setting_'+n.options.valueFieldName+'"]',(function(){var e=jQuery(this),n=e.data("chosen")?e.siblings(".chosen-container"):e.data("select2")?e.siblings(".select2-container"):e,t=e.siblings(".custom-value-container");"gf_custom"==e.val()&&n.fadeOut((function(){t.fadeIn().focus()}))})),n.UI.on("click","a.custom-key-reset",(function(e){e.preventDefault();var n=jQuery(this).parents(".custom-key-container"),t=n.siblings("select.key"),a=t.data("chosen")?t.siblings(".chosen-container"):t.data("select2")?t.siblings(".select2-container"):t;n.fadeOut((function(){n.find("input").val("").change(),t.val("").trigger("change"),a.fadeIn().focus()}))})),n.UI.on("click","a.custom-value-reset",(function(e){e.preventDefault();var n=jQuery(this).parents(".custom-value-container"),t=n.siblings("select.value"),a=t.data("chosen")?t.siblings(".chosen-container"):t.data("select2")?t.siblings(".select2-container"):t;n.fadeOut((function(){n.find("input").val("").change(),t.val("").trigger("change"),a.fadeIn().focus()}))})),n.UI.closest("form").on("submit",(function(e){jQuery('[name^="_gaddon_setting_'+n.options.fieldName+'_"]').each((function(e){jQuery(this).removeAttr("name")}))}))},n.setupData=function(){n.data=jQuery.parseJSON(jQuery("#"+n.options.fieldId).val()),n.data||(n.data=[{key:"",value:"",custom_key:"",custom_value:""}])},n.setupRepeater=function(){var e=n.options.limit>0?n.options.limit:0;n.UI.find("tbody.repeater").repeater({limit:e,items:n.data,addButtonMarkup:'<i class="gficon-add"></i>',removeButtonMarkup:'<i class="gficon-subtract"></i>',callbacks:{add:function(e,t,a){var i=t.find('select[name="_gaddon_setting_'+n.options.keyFieldName+'"]');!a.custom_key&&i.length>0&&"gf_custom"!==i.val()?t.find(".custom-key-container").hide():t.find(".key").hide();var s=t.find('select[name="_gaddon_setting_'+n.options.valueFieldName+'"]');!a.custom_value&&s.length>0&&"gf_custom"!==s.val()?t.find(".custom-value-container").hide():t.find(".value").hide(),n.options.mergeTags&&(new gfMergeTagsObj(form,t.find(".custom-value-container input")),t.find(".custom-value-container").addClass("supports-merge-tags")),window.hasOwnProperty("gform")&&gform.doAction("gform_fieldmap_add_row",e,t,a)},save:function(e,t){jQuery("#"+n.options.fieldId).val(JSON.stringify(t))}}})},n.init()};