var gfieldmap=function(e){var t=this;return t.options=e,t.UI=jQuery("#gaddon-setting-row-"+t.options.fieldName),t.init=function(){t.bindEvents(),t.setupData(),t.setupRepeater()},t.bindEvents=function(){t.UI.on("change",'select[name="_gaddon_setting_'+t.options.keyFieldName+'"]',(function(){var e=jQuery(this),t=e.data("chosen")?e.siblings(".chosen-container"):e.data("select2")?e.siblings(".select2-container"):e,n=e.siblings(".custom-key-container");"gf_custom"==e.val()&&t.fadeOut((function(){n.fadeIn().focus()}))})),t.UI.on("click","a.custom-key-reset",(function(e){e.preventDefault();var t=jQuery(this).parents(".custom-key-container"),n=t.siblings("select.key"),i=n.data("chosen")?n.siblings(".chosen-container"):n.data("select2")?n.siblings(".select2-container"):n;t.fadeOut((function(){t.find("input").val("").change(),n.val("").trigger("change"),i.fadeIn().focus()}))})),t.UI.closest("form").on("submit",(function(e){jQuery('[name^="_gaddon_setting_'+t.options.fieldName+'_"]').each((function(e){jQuery(this).removeAttr("name")}))}))},t.setupData=function(){t.data=jQuery.parseJSON(jQuery("#"+t.options.fieldId).val()),t.data||(t.data=[{key:"",value:"",custom_key:""}])},t.setupRepeater=function(){var e;e=0<t.options.limit?t.options.limit:0,t.UI.find("tbody.repeater").repeater({limit:e,items:t.data,addButtonMarkup:'<i class="gficon-add"></i>',removeButtonMarkup:'<i class="gficon-subtract"></i>',callbacks:{add:function(e,n,i){var a=n.find('select[name="_gaddon_setting_'+t.options.keyFieldName+'"]');!i.custom_key&&0<a.length?n.find(".custom-key-container").hide():n.find(".key").hide(),gform.doAction("gform_fieldmap_add_row",e,n,i)},save:function(e,n){n=jQuery.extend({},n);for(var i=0;i<n.length;i++)""!=n[i].custom_key&&(n[i].custom=1,n[i].key=n[i].custom_key),delete n[i].custom_key;jQuery("#"+t.options.fieldId).val(jQuery.toJSON(n))}}})},t.init()};